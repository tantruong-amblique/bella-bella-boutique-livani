{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useCallback } from \"react\";\n\nfunction useForm(stateSchema) {\n  _s();\n\n  var validationSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var callback = arguments.length > 2 ? arguments[2] : undefined;\n\n  var _useState = useState(stateSchema),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(true),\n      disable = _useState2[0],\n      setDisable = _useState2[1];\n\n  var _useState3 = useState(false),\n      isDirty = _useState3[0],\n      setIsDirty = _useState3[1];\n\n  useEffect(function () {\n    setDisable(true);\n  }, []);\n  useEffect(function () {\n    if (isDirty) {\n      setDisable(validateState());\n    }\n  }, [state, isDirty]); // Used to disable submit button if there's an error in state\n  // or the required field in state has no value.\n  // Wrapped in useCallback to cached the function to avoid instensive memory leaked\n  // in every re-render in component\n\n  var validateState = useCallback(function () {\n    var hasErrorInState = Object.keys(validationSchema).some(function (key) {\n      var isInputFieldRequired = validationSchema[key].required; // Get state value\n\n      var stateValue = state[key].value;\n      var stateError = state[key].error;\n      return isInputFieldRequired && !stateValue || stateError;\n    });\n    return hasErrorInState;\n  }, [state, validationSchema]);\n\n  function handleOnChange(event) {\n    setIsDirty(true);\n    var name = event.target.name;\n    var value = event.target.value;\n    var error = \"\";\n\n    if (validationSchema[name].required) {\n      if (!value) {\n        error = \"This is required field.\";\n      }\n    }\n\n    if (validationSchema[name].validator !== null && typeof validationSchema[name].validator === \"object\") {\n      if (validationSchema[name].validator.regEx) {\n        if (value && !validationSchema[name].validator.regEx.test(value)) {\n          error = validationSchema[name].validator.error;\n        }\n      }\n    }\n\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, {\n        value: value,\n        error: error\n      }));\n    });\n  }\n\n  function handleOnSubmit(event) {\n    event.preventDefault(); // Making sure that validateState returns false\n    // Before calling the submit callback function\n\n    if (!validateState()) {\n      callback();\n    }\n  }\n\n  return {\n    state: state,\n    disable: disable,\n    handleOnChange: handleOnChange,\n    handleOnSubmit: handleOnSubmit\n  };\n}\n\n_s(useForm, \"8mWQt+wmtB+0FEz5DRyzftMthGc=\");\n\nexport default useForm;","map":{"version":3,"sources":["C:/Users/Eloy/Desktop/livani-react-next-ecommerce-template/livani-react/components/Checkout/userForm.js"],"names":["useState","useEffect","useCallback","useForm","stateSchema","validationSchema","callback","state","setState","disable","setDisable","isDirty","setIsDirty","validateState","hasErrorInState","Object","keys","some","key","isInputFieldRequired","required","stateValue","value","stateError","error","handleOnChange","event","name","target","validator","regEx","test","prevState","handleOnSubmit","preventDefault"],"mappings":"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","sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\n\nfunction useForm(stateSchema, validationSchema = {}, callback) {\n    const [state, setState] = useState(stateSchema);\n    const [disable, setDisable] = useState(true);\n    const [isDirty, setIsDirty] = useState(false);\n\n    useEffect(() => {\n        setDisable(true);\n    }, []);\n\n    useEffect(() => {\n        if (isDirty) {\n            setDisable(validateState());\n        }\n    }, [state, isDirty]);\n\n    // Used to disable submit button if there's an error in state\n    // or the required field in state has no value.\n    // Wrapped in useCallback to cached the function to avoid instensive memory leaked\n    // in every re-render in component\n    const validateState = useCallback(() => {\n        const hasErrorInState = Object.keys(validationSchema).some(key => {\n            const isInputFieldRequired = validationSchema[key].required;\n            // Get state value\n            const stateValue = state[key].value;\n            const stateError = state[key].error;\n\n            return (isInputFieldRequired && !stateValue) || stateError;\n        });\n\n        return hasErrorInState;\n    }, [state, validationSchema]);\n\n    function handleOnChange(event) {\n        setIsDirty(true);\n\n        const name = event.target.name;\n        const value = event.target.value;\n\n        let error = \"\";\n        if (validationSchema[name].required) {\n            if (!value) {\n                error = \"This is required field.\";\n            }\n        }\n\n        if (\n            validationSchema[name].validator !== null &&\n            typeof validationSchema[name].validator === \"object\"\n        ) {\n            if (validationSchema[name].validator.regEx){\n                if (value && !validationSchema[name].validator.regEx.test(value)) {\n                    error = validationSchema[name].validator.error;\n                }\n            }\n        }\n\n        setState(prevState => ({\n            ...prevState,\n            [name]: { value, error }\n        }));\n    }\n\n    function handleOnSubmit(event) {\n        event.preventDefault();\n\n        // Making sure that validateState returns false\n        // Before calling the submit callback function\n        if (!validateState()) {\n            callback();\n        }\n    }\n\n    return { state, disable, handleOnChange, handleOnSubmit };\n}\n\nexport default useForm;"]},"metadata":{},"sourceType":"module"}